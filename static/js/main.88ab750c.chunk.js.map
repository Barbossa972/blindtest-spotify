{"version":3,"sources":["logo.svg","loading.svg","Button.js","AlbumCover.js","utils.js","App.js","index.js","App.module.css","Button.module.css"],"names":["Button","props","className","styles","button","onClick","children","AlbumCover","track","src","album","images","url","alt","name","style","width","height","getRandomNumber","x","Math","floor","random","shuffleArray","array","counter","length","index","temp","App","useState","songsLoaded","tracks","currentTrack","buttonTracks","state","setState","started","setStarted","timeout","useRef","chooseTrack","useCallback","items","clearTimeout","current","randomInt","setTimeout","useEffect","fetch","method","headers","Authorization","then","response","json","data","filter","item","preview_url","app","appHeader","logo","appLogo","appImages","controls","autoPlay","appButtons","map","id","swal","loading","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.88ab750c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.53a8fc10.svg\";","export default __webpack_public_path__ + \"static/media/loading.6e6379f4.svg\";","import React from \"react\"\nimport styles from \"./Button.module.css\"\n\nconst Button = props => (\n  <button className={styles.button} onClick={props.onClick}>\n    {props.children}\n  </button>\n)\n\nexport default Button\n","const AlbumCover = ({ track }) => {\n  const src = track.album.images[0].url\n  const alt = \"Album cover for \" + track.album.name\n  return <img src={src} alt={alt} style={{ width: 200, height: 200 }} />\n}\n\nexport default AlbumCover\n","/* Return a random number between 0 included and x excluded */\nexport function getRandomNumber(x) {\n  return Math.floor(Math.random() * x)\n}\n\nexport function shuffleArray(array) {\n  let counter = array.length\n\n  while (counter > 0) {\n    let index = getRandomNumber(counter)\n    counter--\n    let temp = array[counter]\n    array[counter] = array[index]\n    array[index] = temp\n  }\n\n  return array\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\"\nimport swal from \"sweetalert\"\nimport logo from \"./logo.svg\"\nimport loading from \"./loading.svg\"\nimport styles from \"./App.module.css\"\nimport Button from \"./Button\"\nimport AlbumCover from \"./AlbumCover\"\nimport { shuffleArray, getRandomNumber } from \"./utils\"\n\n// Get token from https://developer.spotify.com/console/get-current-user-saved-tracks/\nconst apiToken =\n  \"BQCixRrs2LKTstgLz6A9mCVnCaZwe8a6zzmHje70ZSgwgUPgY1NsS1EUR2DKzBS5LvJoUkl3tgmXaDXrPvk1xIJt2bPaPKtGNxFhQrTKamNgiQVrteN9GiOLchC4-5GBnCX5Xt7vc56C1qFoN_vRaCv6\"\n\nconst App = () => {\n  const [state, setState] = useState({\n    songsLoaded: false,\n    tracks: {},\n    currentTrack: {},\n    buttonTracks: [],\n  })\n\n  const [started, setStarted] = useState(false)\n\n  const timeout = useRef(null)\n\n  const chooseTrack = useCallback(items => {\n    clearTimeout(timeout.current)\n\n    const randomInt = getRandomNumber(items.length)\n\n    setState({\n      tracks: items,\n      songsLoaded: true,\n      currentTrack: items[randomInt].track,\n      buttonTracks: shuffleArray([\n        items[randomInt].track,\n        items[getRandomNumber(items.length)].track,\n        items[getRandomNumber(items.length)].track,\n      ]),\n    })\n    timeout.current = setTimeout(() => {\n      chooseTrack(items)\n    }, 30000)\n  }, [])\n\n  const checkAnswer = id => {\n    if (id === state.currentTrack.id) {\n      swal(\"Bravo\", \"Bonne réponse :)\", \"success\").then(() => chooseTrack(state.tracks))\n    } else {\n      swal(\"Erreur\", \"Mauvaise réponse :(\", \"error\")\n    }\n  }\n\n  useEffect(() => {\n    if (!started) return\n    fetch(\"https://api.spotify.com/v1/playlists/37i9dQZF1DWVuV87wUBNwc/tracks\", {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + apiToken,\n      },\n    })\n      .then(response => response.json())\n      .then(data => {\n        chooseTrack(data.items.filter(item => item.track.preview_url))\n      })\n  }, [chooseTrack, started])\n\n  return (\n    <div className={styles.app}>\n      <header className={styles.appHeader}>\n        <p>\n          <img src={logo} className={styles.appLogo} alt=\"logo\" />\n        </p>\n        <h1 className=\"App-title\">Bienvenue sur le Blindtest</h1>\n      </header>\n      {!started ? (\n        <div className={styles.appImages}>\n          <Button onClick={() => setStarted(true)}>\n            <h1>Start!</h1>\n          </Button>\n        </div>\n      ) : state.songsLoaded ? (\n        <div>\n          <div className={styles.appImages}>\n            <p>La playlist \"Hits du moment\" contient {state.tracks.length} musiques.</p>\n            <p>\n              <b>Bonjour ! Quelle musique entends-tu ?</b>\n            </p>\n            <audio controls autoPlay src={state.currentTrack.preview_url} />\n          </div>\n          <div className={styles.appButtons}>\n            {state.buttonTracks.map(track => (\n              <Button onClick={() => checkAnswer(track.id)}>\n                <AlbumCover track={track} />\n                <br />\n                {track.name}\n              </Button>\n            ))}\n          </div>\n        </div>\n      ) : (\n        <div>\n          <br />\n          <img src={loading} className={styles.appLogo} alt=\"logo\" />\n          <p>Loading...</p>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./global.css\"\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\",\"appLogo\":\"App_appLogo__1qg7-\",\"appLogoSpin\":\"App_appLogoSpin__P7gwA\",\"appHeader\":\"App_appHeader__28RXF\",\"appLink\":\"App_appLink__2pA8F\",\"appImages\":\"App_appImages__2c1AL\",\"appButtons\":\"App_appButtons__1L6BI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__1DqCU\"};"],"sourceRoot":""}