(this["webpackJsonpblindtest-spotify"]=this["webpackJsonpblindtest-spotify"]||[]).push([[0],{14:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n.n(c),r=n(8),s=n.n(r),i=(n(14),n(5)),o=n(4),p=n.n(o),u=n.p+"static/media/logo.53a8fc10.svg",l=n.p+"static/media/loading.6e6379f4.svg",j=n(2),d=n.n(j),b=n(9),h=n.n(b),m=n(0),g=function(t){return Object(m.jsx)("button",{className:h.a.button,onClick:t.onClick,children:t.children})},O=function(t){var e=t.track,n=e.album.images[0].url,c="Album cover for "+e.album.name;return Object(m.jsx)("img",{src:n,alt:c,style:{width:200,height:200}})};function f(t){return Math.floor(Math.random()*t)}function k(t){for(var e=t.length;e>0;){var n=f(e),c=t[--e];t[e]=t[n],t[n]=c}return t}var x=function(){var t=Object(c.useState)({songsLoaded:!1,tracks:{},currentTrack:{},buttonTracks:[]}),e=Object(i.a)(t,2),n=e[0],a=e[1],r=Object(c.useState)(!1),s=Object(i.a)(r,2),o=s[0],j=s[1],b=Object(c.useRef)(null),h=Object(c.useCallback)((function(t){clearTimeout(b.current);var e=f(t.length);a({tracks:t,songsLoaded:!0,currentTrack:t[e].track,buttonTracks:k([t[e].track,t[f(t.length)].track,t[f(t.length)].track])}),b.current=setTimeout((function(){h(t)}),3e4)}),[]);return Object(c.useEffect)((function(){o&&fetch("https://api.spotify.com/v1/playlists/37i9dQZF1DWVuV87wUBNwc/tracks",{method:"GET",headers:{Authorization:"Bearer BQCixRrs2LKTstgLz6A9mCVnCaZwe8a6zzmHje70ZSgwgUPgY1NsS1EUR2DKzBS5LvJoUkl3tgmXaDXrPvk1xIJt2bPaPKtGNxFhQrTKamNgiQVrteN9GiOLchC4-5GBnCX5Xt7vc56C1qFoN_vRaCv6"}}).then((function(t){return t.json()})).then((function(t){h(t.items.filter((function(t){return t.track.preview_url})))}))}),[h,o]),Object(m.jsxs)("div",{className:d.a.app,children:[Object(m.jsxs)("header",{className:d.a.appHeader,children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{src:u,className:d.a.appLogo,alt:"logo"})}),Object(m.jsx)("h1",{className:"App-title",children:"Bienvenue sur le Blindtest"})]}),o?n.songsLoaded?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:d.a.appImages,children:[Object(m.jsxs)("p",{children:['La playlist "Hits du moment" contient ',n.tracks.length," musiques."]}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:"Bonjour ! Quelle musique entends-tu ?"})}),Object(m.jsx)("audio",{controls:!0,autoPlay:!0,src:n.currentTrack.preview_url})]}),Object(m.jsx)("div",{className:d.a.appButtons,children:n.buttonTracks.map((function(t){return Object(m.jsxs)(g,{onClick:function(){t.id===n.currentTrack.id?p()("Bravo","Bonne r\xe9ponse :)","success").then((function(){return h(n.tracks)})):p()("Erreur","Mauvaise r\xe9ponse :(","error")},children:[Object(m.jsx)(O,{track:t}),Object(m.jsx)("br",{}),t.name]})}))})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("br",{}),Object(m.jsx)("img",{src:l,className:d.a.appLogo,alt:"logo"}),Object(m.jsx)("p",{children:"Loading..."})]}):Object(m.jsx)("div",{className:d.a.appImages,children:Object(m.jsx)(g,{onClick:function(){return j(!0)},children:Object(m.jsx)("h1",{children:"Start!"})})})]})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(x,{})}),document.getElementById("root"))},2:function(t,e,n){t.exports={app:"App_app__1kX79",appLogo:"App_appLogo__1qg7-",appLogoSpin:"App_appLogoSpin__P7gwA",appHeader:"App_appHeader__28RXF",appLink:"App_appLink__2pA8F",appImages:"App_appImages__2c1AL",appButtons:"App_appButtons__1L6BI"}},9:function(t,e,n){t.exports={button:"Button_button__1DqCU"}}},[[18,1,2]]]);
//# sourceMappingURL=main.88ab750c.chunk.js.map